<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Walmart</title>
    <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>
    <link rel="stylesheet" href="css/style.css">
</head>

<body ng-app="myApp">
    <nav>
        <div class="nav-wrapper blue darken-3">
            <div class="container">
                <a href="#" class="brand-logo">Teste Walmart</a>
                <ul id="nav-mobile" class="right hide-on-med-and-down">
                    <li><a href="" ng-click="showPedidos = ! showPedidos">Pedidos</a></li>
                    <li><a href="" ng-click="showEnderecos = ! showEnderecos">Endereços</a></li>
                    <li><a href="" ng-click="showPerfil = ! showPerfil">Perfil</a></li>
                </ul>
            </div>
        </div>
    </nav>
    
    <!--Pedidos-->
    <section id="pedidos" ng-controller="PedidosController" ng-show="showPedidos">
        <div class="container">
          <h4>Pedidos</h4>
          <nav>
            <div class="nav-wrapper">
                <div class="input-field">
                  <input id="search" placeholder="Filtrar pedidos - Digite o número do pedido ou o nome do produto" type="search" required ng-model="search">
                  <label for="search"><i class="material-icons">search</i></label>
                  <i class="material-icons">close</i>
                </div>
            </div>
          </nav>
          <ul class="collapsible" data-collapsible="accordion">
            <li ng-repeat="pedido in pedidos | filter: search | orderBy:'-dataCompra'">
              <div class="collapsible-header"><i class="material-icons">label_outline</i>
                  Pedido: {{pedido.numeroPedido}} - Data da compra: {{pedido.dataCompra | date}}
              </div>
              <div class="collapsible-body">
                  <table>
                    <thead>
                      <tr>
                          <th data-field="produto">Produto</th>
                          <th></th>
                          <th data-field="preco">Preço</th>
                          <th data-field="quantidade">Quantidade</th>
                          <th data-field="subtotal">Subtotal</th>
                      </tr>
                    </thead>

                    <tbody>
                      <tr ng-repeat="produtos in pedido.produtosPedido">
                        <td><img class="img-pedidos" ng-src="{{produtos.imageProduto}}"></td>
                        <td>{{produtos.nomeProduto}}</td>
                        <td>{{produtos.precoProduto | currency}}</td>
                        <td>{{produtos.qtdProduto}}</td>
                        <td>{{produtos.precoProduto * produtos.qtdProduto | currency}}</td>
                      </tr>
                    </tbody>
                  </table>
              </div>
            </li>
          </ul>        
        </div>
    </section>
    <!--Pedidos-->
    
    <!--Endereços-->
    <section id="enderecos" ng-controller="EnderecoController" ng-show="showEnderecos">
        <div class="container">
          <h4>Endereços</h4>
          <div class="row">
            <div class="col s6 m6" ng-repeat="endereco in enderecos">
              <div class="card blue-grey darken-1">
                <div class="card-content white-text">
                  <span class="card-title">{{endereco.identificacaoEndereco}}</span>
                    <p>{{endereco.endereco}}</p>
                    <p>{{endereco.bairro}}</p>
                    <p>{{endereco.cep}}</p>
                    <p>{{endereco.cidade}} - {{endereco.estado}}</p>
                </div>
                <div class="card-action">
                  <a class="waves-effect waves-light modal-trigger" href="#modal{{endereco.codEndereco}}">Editar</a>
                </div>                  
              </div>
              <div id="modal{{endereco.codEndereco}}" class="modal">
                <div class="modal-content">
                  <h4>{{endereco.identificacaoEndereco}}</h4>
                    <div class="row">
                        <form class="col s12">
                          <div class="row">
                            <div class="input-field col s12">
                              <input value="{{endereco.endereco}}" id="txtEndereco" type="text" class="validate">
                              <label class="active" for="txtEndereco">Endereço</label>
                            </div>
                            <div class="input-field col s6">
                              <input value="{{endereco.bairro}}" id="txtBairro" type="text" class="validate">
                              <label class="active" for="txtBairro">Bairro</label>
                            </div>
                            <div class="input-field col s6">
                              <input value="{{endereco.cep}}" id="txtCEP" type="text" class="validate">
                              <label class="active" for="txtCEP">CEP</label>
                            </div>
                            <div class="input-field col s6">
                              <input value="{{endereco.cidade}}" id="txtCidade" type="text" class="validate">
                              <label class="active" for="txtCidade">Cidade</label>
                            </div>
                            <div class="input-field col s6">
                              <input value="{{endereco.estado}}" id="txtEstado" type="text" class="validate">
                              <label class="active" for="txtEstado">Estado</label>
                            </div>                              
                          </div>                          
                        </form>
                    </div>
                </div>
                <div class="modal-footer">
                  <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Salvar</a>
                </div>
              </div>                 
            </div>
          </div>            
        </div>       
    </section>
    <!--Endereços-->
    
    <!--Perfil-->
    <section id="perfil" ng-show="showPerfil">
        <div class="container">
            <h4>Perfil</h4>
        </div>        
    </section>
    <!--Perfil-->
    
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script type="text/javascript" src="js/materialize.min.js"></script>
    <script src="js/angular.min.js"></script>
    <script src="js/angular-locale_pt-br.js"></script>
    <!-- Modules -->
    <script src="js/app.js"></script>
    <!-- Controllers -->
    <script src="js/controllers/MainController.js"></script>
    <script src="js/controllers/PedidosController.js"></script>    
    <script src="js/controllers/EnderecoController.js"></script>
    <script src="js/controllers/PerfilController.js"></script>
    
    <script>
      $(document).ready(function(){
        $('.modal-trigger').leanModal();
      });    
    </script>
    
</body>
</html>
